var wsc,ledcolor={r:255,g:255,b:255};document.addEventListener("DOMContentLoaded",function(){(wsc=new ReconnectingWebSocket("ws://"+window.location.hostname+"/ws")).timeoutInterval=3e3,wsc.onopen=function(e){console.log("WebSocketClient connected:",e)},wsc.onmessage=function(e,o,r){console.log("WebSocketClient message #${number}: ",e);var n=JSON.parse(e.data);ledcolor.r=n.colorRGB.r,ledcolor.g=n.colorRGB.g,ledcolor.b=n.colorRGB.b,colorPicker.color.rgb=ledcolor,document.getElementById("brightness").value=Math.round(n.level/2.55),document.getElementById("br").innerHTML=Math.round(n.level/2.55),1==n.state?document.getElementById("onoff").checked=!0:document.getElementById("onoff").checked=!1},document.getElementById("color_r").onchange=function(e){var o=e.target.value,r=colorPicker.color.rgb;colorPicker.color.rgb={r:o,g:r.g,b:r.b};var n={color:{r:r.r,g:r.g,b:r.b}};wsc.send(JSON.stringify(n))},document.getElementById("color_g").onchange=function(e){var o=e.target.value,r=colorPicker.color.rgb;colorPicker.color.rgb={r:r.r,g:o,b:r.b};var n={color:{r:r.r,g:r.g,b:r.b}};wsc.send(JSON.stringify(n))},document.getElementById("color_b").onchange=function(e){var o=e.target.value,r=colorPicker.color.rgb;colorPicker.color.rgb={r:r.r,g:r.g,b:o};var n={color:{r:r.r,g:r.g,b:r.b}};wsc.send(JSON.stringify(n))},document.getElementById("br").innerHTML=document.getElementById("brightness").value,document.getElementById("brightness").onchange=function(e){document.getElementById("br").innerHTML=e.target.value;var o={level:Math.round(Number(2.55*e.target.value))};wsc.send(JSON.stringify(o))},document.getElementById("onoff").onchange=function(){var e;e=document.getElementById("onoff").checked?{state:!0}:{state:!1},wsc.send(JSON.stringify(e))}});var colorPicker=new iro.ColorPicker("#color-picker-container",{width:320,height:320,color:{r:ledcolor.r,g:ledcolor.g,b:ledcolor.b},anticlockwise:!0,borderWidth:1,borderColor:"#fff",css:{"#swatch":{"background-color":"$color"}}});colorPicker.on("color:change",function(e){document.getElementById("color_r").value=e.rgb.r,document.getElementById("color_g").value=e.rgb.g,document.getElementById("color_b").value=e.rgb.b,document.getElementById("values_r").innerHTML=e.rgb.r,document.getElementById("values_g").innerHTML=e.rgb.g,document.getElementById("values_b").innerHTML=e.rgb.b}),colorPicker.on("input:end",function(e){var o={color:{r:e.rgb.r,g:e.rgb.g,b:e.rgb.b}};wsc.send(JSON.stringify(o))});